# Changelog

All notable changes to this project will be documented in this file.

## [0.1.0-alpha.2] - 2025-06-01

### 🚀 Features

- *(server)* Add /_matrix/client/versions endpoint
- *(server)* Implement /.well-known/clients and /.well-known/support
- *(server)* Follow matrix spec to configure the CORS
- *(server)* Add support endpoint for oc api
- *(server)* Read the env var from .env file
- *(server)* Add validation for register and set_self_info endpoints
- *(server)* Add more checks for join_in_session endpoint
- *(server)* Add mergeable config file
- *(server)* Export server_info.json from docker image
- *(server)* Backup the server_info.json first
- *(server)* Implement soft unregister
- *(server)* Save user_defined_status in redis and add a expire time.
- Preset Status and Time format
- *(server)* Add the test of the user-defined status' expire time.
- *(server)* Add the announcement adding function.
- *(server)* Change the migration format.
- *(server)* Change timestamp to timestamp_with_timezone in migration.
- *(server)* Add the publish_announcement function
- *(server)* Finish the tls in grpc part.
- *(client)* Add log configuration to setting menu
- *(server)* Change display_name's behaviour when missing
- *(client)* Log out, search&show user's information, add friend
- *(server)* Add some consts to config file
- *(server)* Delete log automatically

### 🐛 Bug Fixes

- Fix /v1/logo endpoint
- *(server)* Permission implementation of add_role is missing
- *(client)* Add the compilation support of other platforms
- *(server)* Display error of rpc server itself
- *(server)* Compilation error
- *(server)* Fix clippy and ruff
- *(server)* Fix some chores about tls.
- *(client)* Fix protobuf compilation error
- *(client)* Fix grpc analysis
- *(client)* Fix the issue of no response after successful registration
- *(client)* Fix the ui layout issue in setting
- *(client)* Fix the tab order issue in home(desktop)
- Warnings of clippy and compilation error
- *(script)* Incorrect progress bar
- *(server)* Make user_defined_status public

### 💼 Other

- *(server)* Disable native tls for matrix-sdk
- Update deps
- Update to sea-orm 1.1.5
- *(server)* Update deps
- Optimize Dockerfile
- *(deps)* Bump sea-orm's entities files from 1.1.6 to 1.1.7
- *(deps)* Bump serde_json from 1.0.139 to 1.0.140
- *(deps)* Bump proc-macro2 from 1.0.93 to 1.0.94
- *(deps)* Bump anyhow from 1.0.96 to 1.0.97
- *(deps)* Bump thiserror from 2.0.11 to 2.0.12
- *(deps)* Bump sea-orm-migration from 1.1.6 to 1.1.7
- *(deps)* Bump ring from 0.17.11 to 0.17.13
- *(deps)* Bump syn from 2.0.98 to 2.0.100
- *(deps)* Bump ctor from 0.4.0 to 0.4.1
- *(deps)* Bump quote from 1.0.38 to 1.0.39
- *(deps)* Bump bytes from 1.10.0 to 1.10.1
- *(deps)* Bump serde from 1.0.218 to 1.0.219
- *(deps)* Update server deps
- *(deps)* Bump reqwest from 0.12.14 to 0.12.15
- *(deps)* Bump mimalloc from 0.1.43 to 0.1.44
- *(deps)* Bump shadow-rs from 1.0.1 to 1.1.1
- *(deps)* Bump fake from 4.0.0 to 4.2.0
- *(deps)* Bump tempfile from 3.19.0 to 3.19.1
- Update deps
- Update sea-orm
- Unstable feature duration_constructors_lite
- *(server)* Bump redis from 7 to 8
- *(server)* Update deps

### 🚜 Refactor

- *(server)* More efficient implementation of preset_user_status
- *(server)* Optimize the token check error report
- *(server)* Split utils from base and integrate time into pb
- Use argparse to simplify script
- *(server)* Data-driven RoldId and PermissionId

### ⚡ Performance

- *(client)* Remove redundant Interceptor

### 🧪 Testing

- *(server)* Fix merge config test
- *(server)* Fix macos test
- *(server)* Add log clean test
- *(server)* Fix test ci
- *(server)* Add zero timestamp message receive test

### ⚙️ Miscellaneous Tasks

- Fix docker build on release
- Add community to readme
- Update readme[skip ci]
- Remove useless deps
- Format dart files
- Add nightly images build
- Fix docker build
- Add cache for linux build
- Fix release ci [skip ci]
- Split alpine and debian test
- Fix ci
- Add github_token to extend rate limit
- Update readme
- Fix buf ci
- Fix ci
- *(server)* Add comments and fix warnings
- Remove port export by default
- Skip duplicated actions
- Skip more actions
- Add clippy check and split ci into server part and client part
- Format code
- Remove cargo check of macos
- Fix ci
- Fix fmt installation
- Fix clippy installation
- Fix tls test in docker
- Fix http uri parse
- Fix nightly build
- Update macos docker
- Update readme
- Delete useless file
- Fix client ci
- Fix client ci
- Update release

## [0.1.0-alpha.1] - 2025-02-07

### 🚀 Features

- *(server)* 创建基础的socket库
- *(server)* Qt ui初步建立
- *(server)* 初始化服务端,配置好服务端开发环境
- *(server)* 配置server的单元测试环境
- *(client)* 新增ui界面
- *(client)* Update
- *(client)* 添加了语言文件和登录注册界面
- *(client)* 添加了向服务器发送文本信息的功能
- *(server)* 新增命令行解析库，数据库初步被使用
- *(server)* 完成注册功能
- *(server)* 实现登录功能
- *(client)* 每次接收消息存储聊天记录
- *(server)* 初步实现发送消息功能
- *(client)* 实现登录功能
- *(client)* 实现显示信息功能，同时修复了一些bug
- Init the server development
- *(server)* Add command loop
- *(server)* Connect to mysql
- *(server)* Websocket initially developed
- *(web)* Add initial web support
- *(client)* 1. Add UI (setting, account, chat) 2. Add switching interface functionality refactor(client): Remove redundant code
- *(client)* 1. Add UI (setting, account, chat) 2. Add switching interface functionality refactor(client): Remove redundant code
- *(tauri-client)* Add new client from web
- *(server)* Add database create
- *(server)* Add redis
- *(server)* Improve cfg
- *(server)* Add sea-orm
- *(server)* Finish register feature
- *(server)* Finish login
- *(client-pc)* Login/register
- *(server)* Add ws loop
- *(client-pc)* Add restart and log recording functionality.
- *(server)* Add unregister
- *(client-pc)* Turn login from dialog to widget
- *(client-pc)* Show/hide server box
- *(client-pc)* Add version api
- *(server)* Add tracing log crate
- *(client-pc)* Setting
- *(server)* Create the migrations of database
- *(client-pc)* Add time in when putout log
- *(client-pc)* Added configuration and log cleanup functionality
- *(client-pc)* Session_list and session_box
- *(client-pc)* Improve "About"
- *(server)* Add clear flag
- *(client-pc)* Show Message in UI
- *(server)* Server manager system init
- *(server)* Server config
- Improve scripts' system error
- *(client-pc)* Send/recv user message
- *(server)* Basic sqlite support
- *(server)* Init sqlite support
- *(server)* Fit new status design[skip ci]
- *(server)* Sqlite support
- *(server)* Add maintaining mode
- *(server)* Add get_status to verify stage
- *(server)* Add help,setstatus,getstatus command
- *(server)* Use relative path for config file
- *(client-pc)* Assign keyboard shortcuts in the UI
- *(server)* More file upload support
- *(client-pc)* Implemented the functionality of sending messages with "Enter" and creating a new line with "Ctrl+Enter"
- *(client-pc)* Search session
- *(server)* File monitoring system
- *(server)* Auto clean loop
- *(server)* Cleanfs command
- *(server)* Add hash to response of uploading
- *(server)* Add foreign key of user id in files table
- *(server)* Add status api
- *(server)* Change config type to toml
- *(server)* Add newtype ID to fit two db
- *(server)* Add file_size option
- *(server)* Add firends limit
- *(server)* Add network cmd
- *(client-pc)* 可以在profile处上传并修改头像了
- *(client-pc)* Add "size" parameter for upload
- *(server)* Support more config type
- *(server)* Basic support of verification
- Remove client written in python
- *(server)* Finish verify
- Use argon2id to store password
- *(client)* Add ui of login
- Add linux target
- *(client)* Improve login and register ui
- *(client)* Keep input values when UI changes
- Use redis instead of DaskMap
- *(client)* Add target platforms
- Finish verify
- Cleanup useless notifier regularly
- Basically finish session creation
- Basically finish new session
- *(server)* Define new info struct
- *(client)* Add localization support for Ourchat client
- Add a timestamp endpoint returns timestamp using rfc3339 standard
- *(server)* Basically finish get_user_info
- *(server)* Finish get info
- *(server)* Finish set account info
- *(client)* Setting
- *(server)* Add friend info set feature
- *(client)* Home page
- *(server)* Support postgres,remove mysql support
- *(server)* Basic message sent
- *(client)* Implement the session_list and session_record interfaces (no functionality)
- *(server)* Finish fetch msgs feature
- *(client)* Multi-device Adaptation
- *(server)* Remove http file part
- Add protobuf definitions
- Add verify feature
- Upload and download
- *(server)* Add fetch_msg_page_size as 2000 into config file
- *(server)* Add verification_expire_days as 3 into config file
- *(server)* Finish a TODO about moving factors to config
- *(server)* Change default_output_len from Some(32) to None
- *(server)* Add files_storage_path into config file
- *(server)* Add ssl support
- *(server)* Set avatar of account
- *(server)* Transform download files_storage_path into pathbuf
- *(server)* Add cleaning files according to date
- *(server)* Enhance the log and the debug console
- *(client)* Added navigation bar to the home interface and adapted for multi-device compatibility
- *(server)* Add ocid returning when auth
- *(server)* Finish fetch msgs feature
- *(client)* Multi-device Adaptation
- *(server)* Remove http file part
- Add protobuf definitions
- *(server)* Basically recall feature
- *(client)* Get account info
- Multiple of config file are supported
- *(server)* Basic support of session info
- Add set_session_info endpoint
- Add server name for GetServerInfo endpoint
- *(server)* Add add_role endpoint
- *(client)* Auth&connect
- *(server)* Add maintainng  interceptor
- *(server)* Basically support ban and mute
- *(client)* Deal with the error of auth endpoint
- *(server)* Add add_friends, accept_friend, ban and mute endpoints
- *(server)* Add leave_session endpoint
- *(server)* Add delete_session endpoint
- *(client)* Add friend feature,add grpc interceptor
- *(server)* Add server_info_json_version and the updating function.
- *(server)* Add join_in_session endpoint
- *(server)* Use garnet instead of redis to support windows
- *(server)* Implement delete_friend endpoint
- *(server)* Add join_in_session notification
- *(server)* Implement add_friend endpoint

### 🐛 Bug Fixes

- *(client)* 修复资源文件缺失问题
- *(server)* 修复无法在低版本cmake和linux上编译的问题
- *(server)* 修复无法在linux上编译的问题
- *(project)* Update readme.md
- *(server)* 修复在linux上构建失败的问题
- *(client)* 修复在macos和linux下无法打开关于界面的问题
- Install rust lsp in dev container
- *(server)* Fix windows compilation bug
- Dockerfile can be runned in windows now
- Force the eol to lf
- Fix the style of readme
- *(server)* Fix database primany key missing problem
- *(server)* Make data not null
- *(server)* Blocking forever without stdin
- *(server)* Exit in read and write connection loop
- *(server)* Pass tests
- *(client-pc)* Auto add "log" folder
- *(server)* Regenerate entities
- *(client-pc)* Fixed some issues caused by transitioning from PyQt5 to PyQt6.
- *(client-pc)* The config will be saved when OurChat closes
- *(client-pc)* Fix "fake restart"
- *(client-pc)* Crash caused by starting threads after restart.
- Typos
- Link to documentation
- Readme link to correct language
- Link to new docs
- Typos
- *(server)* OnceLock has not been initilized correctly
- *(client-pc)* Rename private_update_time to update_time
- *(client-pc)* Cannot close the connection thread after being idle
- Fix clippy
- Server close msg
- Fix closing when verifying
- Closing in read_loop
- *(server)* Fix mixture of different message types in ws
- *(client-pc)* Wrong import
- *(server)* Create file_storage dir
- *(server)* Exit happen immediately
- Create different db for different database
- Fix clippy warnings and typos
- Server close db connection after aborting
- *(client)* Typos
- Send msg in write_loop
- *(server)* Return rfc3339 in invitesession now
- Remove session relation before unregister
- *(client)* Typos
- Unregister not delete operations
- Fix clippy
- If server_info.json is wrong,exit rather than leaving a poison
- Incorrect password can auth successfully
- Fix protobuf lint warnings
- Format .proto files
- Proto lint warning
- Proto lint warning
- *(server)* Fix clippy
- *(server)* Compile error
- *(server)* Fix rustrover warning
- *(server)* Remove some unused warnings
- *(server)* Change user_files_limit from MB to MiB
- *(server)* Return alreadyexists
- *(client)* Typos
- Merging conflict
- Rebuilt Cargo.lock file
- Fix some warnings of shadow-rs
- *(client)* Update code about grpc service
- *(server)* Detect whether the ocid is too long
- *(server)* Wait until the server has been started fully
- Add more logs to detect the bug
- *(server)* Not reading args when testing
- Delete queue
- *(server)* Run migrations when database exists
- *(server)* Create unique vhost for every test case
- *(server)* Conflict on database migration in http server and main server
- *(server)* Add .cargo to Dockerfile
- *(client)* Deal with the error of auth endpoint
- *(client)* Add duration.proto to compile
- *(server)* Fix the first time build process error
- *(server)* If .env not found, no error will be emitted
- *(server)* Restrict futures' running order
- *(server)* Change redis user name from "root" to "default"
- Fix clippy
- Set_friend_info endpoint will create a friend relation incorrectly
- First build base image
- Fix rustrover
- Fix add_friend test
- Fix text_get test
- Fix recall test

### 💼 Other

- *(server)* 使用boost的asio库代替自己的socket库
- *(googletest)* 将googletest加入仓库，方便构建和统一版本号
- *(googletest)* 更新和裁剪googletest
- *(googletest)* 更新gtest依赖项
- *(boost.asio)* 移除boost组件，分离出asio组件
- *(server)* Remove github action of compilation
- Add docker
- Add build container script
- Improve process
- Add rust-analyzer to dev docker
- Add prod Dockerfile
- Add logo files
- Delete redundant files[skip ci]
- *(server)* Update deps
- *(server)* Update deps
- *(clien-pc)* Add build script
- *(client-pc)* Rename build script
- *(client-pc)* Update to PyQt6
- *(client-pc)* Update build_pc.py
- *(client-pc)* Update build_pc.py and dev_requirements.txt
- Logo
- Update deps
- *(client-pc)* Typos
- *(client_pc)* Update build_pc.py
- *(server)* Update deps
- *(client-pc)* Update build_pc.py
- Update deps
- Update deps
- Update to rust 2024
- *(server)* Basic support of uploading in websocket
- Downgrade to rust 2021
- *(client-pc)* Remove dev_requirements.txt
- Fix deps of rmodule
- Update deps
- Update deps
- Update deps
- Add version check to sea-orm-cli
- Add delete database script
- Add prod dockerfile
- Remove cmake build dep in Dockerfile
- Update to sea-orm 1.1.2
- Optimize Cargo.toml
- *(deps)* Bump chrono from 0.4.38 to 0.4.39
- *(deps)* Bump thiserror from 2.0.5 to 2.0.6
- Add delete database script
- Update deps
- Use alpine to reduce the size of the image
- Reduce deps
- Add debian and aphine test with docker
- Add format script and update the description
- Optimize the development process of tonic
- Update deps
- *(server)* Add logo
- Add doc [skip ci]
- Add cargo-chef for docker build
- Fix the volume of config dir
- Fix testing resource directory mapping
- Update deps
- Use redis
- Update deps

### 🚜 Refactor

- *(server)* Fix old version code
- Rewrite with rust
- *(client)* Move uiSystem.py into lib folder
- Move src-tauri and web into client folder
- Improve code quality
- *(server)* Remove redundant code
- *(server)* Combine three projects into a workspace
- *(server)* Update rust MSRV
- *(server)* Remove test_lib
- Rename
- *(client-pc)* Typos
- *(client-pc)* Typos
- *(client-pc)* Typos
- *(client-pc)* Format the code
- *(server)* Split connection struct
- *(client-pc)* Format the code
- *(server)* Split process from event loop
- *(docs)* Split docs into seqarate repo
- *(client-pc)* Rename private_update_time to update_time
- Adjust status to new design
- *(client-pc)* Merge "Connect to the server" and "Join" in the login interface
- *(server)* Fix clippy and rustrover warning
- *(server)* Add foreign key for db and rename some columns
- Reorganize the structure of the folders
- *(server)* Strong type instead of u64
- *(server)* Fix clippy
- *(server)* Unify two ways of socket sending
- *(server)* The workspace path
- Db transmit
- Call verify directly
- Remove dbrequest
- Use into() to reduce reducdant code
- Extract a trait of net sender
- *(server)* Use trait MsgConvert in place of Into<Message> impl
- *(client)* Connection
- *(client)* Refactoring the logic of the Join interface
- Remove connection module
- *(server)* Rename Login to Auth
- Reorganize the structure of protobuf files
- *(server)* Pb structure reorganized
- Change send_msg from streaming transport into unary rpc call
- *(server)* Split entities of db and ptotobuf files from "server"
- *(client)* Refactoring the logic of the Join interface
- *(rpc)* Refactor service
- *(server)* Remove some useless function,add some documents and redesign the database fundamental functions' organizing way
- *(server)* Split http server from main program
- *(server)* Remove UserNotFound in upload endpoint
- *(client)* Move client/ourchat to client

### 📚 Documentation

- *(project)* 更正数据解释
- *(project)* 添加了一些新的消息类型
- Fix readme windows status[skip ci]
- Add English translation[skip ci]
- Rewrite most of the JSON messages
- Add status of web version[skip ci]
- Add description[skip ci]
- Fix markdown warnings[skip ci]
- Add server web-client tauri-client build docs
- Add docs for contributing
- Fix linking wrong
- Add link of contributing
- Update msg_json.md
- Fix format error
- Fix wrong json type name
- Update msg_json.md
- Update msg_json.md
- Update msg_json.md
- Add mdbook
- Fix wrong links
- Update msg_json.md
- Update test
- Fix wrong links
- Update readme[skip ci]
- Reedme logo
- Update contributions docs
- Fix content
- Refactor English docs
- Fix wrong link to docs
- *(server)* Correct the database
- Add user_msg_json.md,update msg_json.md
- Move user_msg_json.md
- Add English docs
- Typos
- Use Sphinx as generator
- Move CONTRIBUTING.md to readthedocs
- Add script doc
- Add script doc
- Add doc for protobuf endpoints

### ⚡ Performance

- *(server)* Add mimalloc allocator
- Use parking_lot::Once
- *(server)* Split into pages instead of using "all"
- *(server)* Add database index for user char msg time

### 🎨 Styling

- *(project)* Format all code
- *(client)* Format the code
- *(client)* Format code again!
- *(client)* Format the code
- *(client)* Format the code
- *(client)* Format the code
- *(client-pc)* Format the code

### 🧪 Testing

- *(client,pc)* Add a simple server for test
- *(server)* Add test system
- *(server)* Add unregister test
- *(client-pc)* Fix code8(new session) has no return
- *(client-pc)* Fix some bugs with new_session
- *(client-pc)* Run arguments
- *(server)* Add maintaining test and get status test
- *(server)* Fix Future in login test
- *(server)* Add some unittests and fix some warnings
- *(server)* Fix wrong test addr
- *(client)* Add testing server
- Remove all sqlite files
- Mock email sender
- Add verify test
- *(client)* Add unit test
- Add basic stress test
- *(server)* Stress test basic framework
- *(server)* Add register stress test
- *(server)* Add stress test of get_info,upload and download
- *(server)* Add clap arg parser for stress test
- *(server)* Add clap arg parser for stress test
- *(client)* Add unit test
- *(server)* Add recall test
- Add test for get_id and get_session_info endpoints
- *(server)* Fix rustls's bug
- *(server)* Add more logs to detect the bug
- *(server)* Add verify test
- *(server)* Remove doc test of protobuf module
- *(server)* Fix the name of testing docker image
- *(server)* Fix the wrong logic og recall message test
- *(server)* Add join in session test
- Add set_role test

### ⚙️ Miscellaneous Tasks

- *(server)* 配置自动格式化工具
- Add rust test
- Add rust test on linux dev
- Add python check
- Fix running on main branch
- Fmt rust code
- Format python code
- Add web ci
- Fix typos and format
- Fix wrong path
- Fix web build
- Create docs.yml
- Fit docker test
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Rename scripts extension
- Change scripts running dir
- Fix ci
- Share version and edition between Cargo.toml
- Fix ci
- Fix mdlint
- Remove docs ci
- Delete mdlint config file
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Change open-source license
- Fix ci
- *(server)* Format code
- Fix ci with python deps
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix windows ci
- Fix ci
- Fix ci
- Add tarpaulin
- Fix ci
- Fix ci
- Fix ci
- Fmt code
- Fix ci
- Add flutter check
- Fix windows redis
- Set up redis
- Flutter init
- Fix ci
- Set up flutter
- Fix redis password
- Fix ci
- Fix ci
- Add sccache
- Fix ci
- Fix ci
- Fix ci
- Fix test
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix cache bug
- Fix codecov
- Delete python client script
- *(server)* Fix ci
- Fix ci
- Fix ci
- Move cov to main
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Update to rust2024
- Break change detector
- Fix ci
- Add docker publish action
- Fix ci
- Fix protobuf service name
- Provide token to get past rate limits
- Fmt rust code
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix ci
- Fix github action
- Fix ci
- Fix ci
- Fmt code
- Ignore the error
- Fix fmt
- Fix fmt protobuf files
- Format code
- Fix doc test
- Fix glibc bug
- *(server)* Add test for macOS
- *(server)* Fix macOS test
- *(server)* Fix macOS test
- *(server)* Fix macOS test
- *(server)* Fix macOS test
- Fix ci
- Optimize the performance
- Fix typo
- Fix mq
- Fix ci
- Remove useless script
- Fix ci
- Format code
- Format .py and .rs
- Panic rather than loop
- Fix compile error
- Fix ci
- Fix ci
- Fix path of client
- Retry to fix coverage requirement
- Update codecov to v5
- Format protobuf files
- Format protobuf files
- Fix the path of the config file
- Add duration.proto for dart
- Fix path of protobuf dart output
- Format code
- Format protobuf files
- Remove volumes for development env

<!-- generated by git-cliff -->
